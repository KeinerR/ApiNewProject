@using X.PagedList.Mvc.Core
@model X.PagedList.IPagedList<VistaNewProject.Models.Detallecompra>

@{
    ViewData["Title"] = "Detalles del Pedido";
}

<table class="table table-bordered table-striped">
    <div class="pedido-info">
        <h2 style="text-align:center;">Información del Pedido</h2>
        <table class="table" style="margin: 0 auto; width: 60%;">
            <tbody style="text-align: center;">
                <tr style="background-color: lightgray;">
                    <th>Codigo:</th>
                    <th>Proveedor:</th>
                    <th>#Factura:</th>
                    <th>Valor Total:</th>
                    <th>Fecha Compra:</th>
                    <th>Estado:</th>

                </tr>
                <tr style="background-color: white;">
                    <td>@(ViewBag.compras.CompraId)</td>
                    <td>@(ViewBag.Proveedor.NombreEmpresa)</td>
                    <td>@(ViewBag.compras.NumeroFactura)</td>
                    <td>@(ViewBag.compras.ValorTotalCompra)</td>
                    <td>@(ViewBag.compras.FechaCompra)</td>
                    <td>@(ViewBag.compras.EstadoCompra)</td>


                </tr>
            </tbody>
        </table>



        <br />
        <div style="margin:auto; text-align:center;">
            <h2>Detalles del Pedido</h2>
        </div>

        <div>
            @if (Model.Any())
            {
                <table class="table" style="margin: 0 auto; width: 60%;">
                    <thead style="background-color: lightgray;">
                        <tr style="text-align: center;">
                            <th>Producto</th>
                            <th>NumeroLote</th>
                            <th>Unidad</th>
                            <th>Cantidad</th>
                            <th>Precio PrecioPorPresentacion</th>
                            <th>Precio PrecioPorUnidadProducto</th>
                            <th>PrecioCompra</th>
                            <td>
                            </td>
                        </tr>
                    </thead>
                    <tbody>

                        @foreach (var detalle in Model)
                        {
                            <tr style="text-align: center; background-color: white;">
                                <td>@detalle.Producto?.NombreProducto </td>
                                <td>@detalle.lote.NumeroLote</td>
                                <td>@detalle.Unidad.NombreUnidad</td>
                                <td>@detalle.Cantidad</td>
                                <td>@detalle.lote.PrecioPorPresentacion</td>
                                <td>@detalle.lote.PrecioPorUnidadProducto</td>
                                <td>@detalle.lote.PrecioCompra</td>
                               
                                @if (ViewBag.movimiento == "Entrada")
                                {

                                    
                                }
                            </tr>
                        }
                    </tbody>
                </table>

                <div class="pagination-detail">
                    @Html.Raw("<a href='" + Url.Action("DetallesCompras", new { CompraId = ViewBag.compras.CompraId, page = Model.HasPreviousPage ? Model.PageNumber - 1 : 1 }) + "' class='prev-next " + (Model.HasPreviousPage ? "" : "disabled") + "'>Anterior</a>")

                    @for (int i = 1; i <= Model.PageCount; i++)
                    {
                        <a href="@Url.Action("DetallesCompras", new { CompraId = ViewBag.compras.CompraId, page = i })" class="@(i == Model.PageNumber ? "active" : "")">@i</a>
                    }

                    @Html.Raw("<a href='" + Url.Action("DetallesCompras", new { CompraId = ViewBag.compras.CompraId, page = Model.HasNextPage ? Model.PageNumber + 1 : Model.PageCount }) + "' class='prev-next " + (Model.HasNextPage ? "" : "disabled") + "'>Siguiente</a>")
                </div>


            }
           
        </div>
    </div>
